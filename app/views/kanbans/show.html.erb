<p id="notice"><%= notice %></p>

<p>
  <strong>Name:</strong>
  <%= @kanban.name %>
</p>

<% if false %>
  <%= form_with url: kanban_sort_path, method: :patch do |f|%>
    <%= f.text_field 'kanban[kanbanIds]', class: "kanban-form-input" %>
    <%= f.submit "Saved changes" %>
  <% end %>
<% end %>

<div class="kanban" data-id="<%= @kanban.id %>">
  <% @kanban.kanban_columns.each do |column| %>
    <ul class="kanban-col" data-col-id=<%= column.id %>>
    <div class="kanban-col-name"><%= column.name %></div>
    <%= link_to new_kanban_card_path(@kanban, :kanban_column_id => column.id) do%>
      <div class="kanban-col-add">+</div>
    <%end%>
      <% column.cards.sort_by{ |card| card.position}.each do |item| %>
        <%= link_to edit_kanban_card_path(@kanban, item.id) do%>
            <li class="kanban-col-item" data-item-id=<%= item.id %>>
              <%= item.content %>
              <%= link_to "delete", kanban_card_path(@kanban, item.id), method: :delete, data: { confirm: 'Are you sure?' } %>
            </li>
        <%end%>
        <%#= render partial: 'cards/cards', locals: {item: item} %>
      <%end%>
    </ul>
  <% end %>
</div>

<%= link_to 'Edit', edit_kanban_path(@kanban) %> |
<%= link_to 'Back', kanbans_path %>